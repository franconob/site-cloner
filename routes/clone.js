// Generated by CoffeeScript 1.6.3
(function() {
  var Cloner, config;

  Cloner = require('../src/cloner');

  config = require('../src/config');

  exports.clone = function(req, res) {
    var cloner, config_env, data, domain, lp;
    lp = req.params.landingPage;
    domain = req.params.domain;
    config_env = config[req.app.get('env')];
    config_env['all'] = config['all'];
    data = req.body.data;
    cloner = new Cloner(data, config_env, lp, domain);
    cloner.clone();
    cloner.on('success', function(domain) {
      return res.json({
        status: 'success',
        domain: "" + domain + config_env.domain
      });
    });
    return cloner.on('error', function(err, type, args) {
      return res.json({
        status: 'error',
        error: {
          code: err.code,
          message: err.toString()
        }
      });
    });
  };

}).call(this);
